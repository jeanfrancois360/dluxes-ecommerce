# Docker Compose Override for M1 Mac Performance
# This file reduces memory limits for all services

version: '3.8'

services:
  postgres:
    mem_limit: 512m
    cpus: 1.0
    environment:
      - POSTGRES_SHARED_BUFFERS=128MB
      - POSTGRES_EFFECTIVE_CACHE_SIZE=256MB

  redis:
    mem_limit: 256m
    cpus: 0.5
    command: redis-server --maxmemory 200mb --maxmemory-policy allkeys-lru

  meilisearch:
    mem_limit: 512m
    cpus: 0.5
    environment:
      - MEILI_MAX_INDEXING_MEMORY=256MB
